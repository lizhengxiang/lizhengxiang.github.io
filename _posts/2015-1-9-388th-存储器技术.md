---
date: 2015-1-9 20:50:12+00:00
layout: post
title: 高速缓存对程序性能的影响
thread: 11
categories: 读书笔记
tags: CS-APP
---

##关于存储系统
计算机的存储系统主要有以下几个部分组成

               寄存器------高速Cache-----内存--------硬盘
他们的访问速度也是从高到底的，所以说我们要尽可能的提高寄存器的使用效率，减少文件的读写操作。

##关于高速缓存
本想着这一章可以草草的看完就收工结束了，但最后一节那个关于二维数组命中的问题太震撼了，稍微改了一行的代码后竟然有那么大的差别，命中率一下子变成了0。看来写代码的时候必须的时时刻刻提高警惕，有些东西你要像教条一样放到脑子中。离我们最近的L1 cache对程序的性能有很大的影响。原来以为高速缓冲更过的是应用程序或者操作系统的存储管理相关的，从来没有考虑过L1，L2，L3缓冲对程序性能的影响。

##存储器层次结构对程序性能的影响
再回过头去看这一章的话，可以发现，作者给出了很多怎样通过利用高速缓冲技术来提高程序性能的方法

- 局部性，尽量的使用局部变量，这样可以减少存储器的读写次数。
- 存储器最好顺序的访问，这样可以提高高速缓冲的命中率
- 从存储器中读到一个变量后尽可能多的使用它，从而使的程序中的时间局部性最大

##关于读书
这本书断断续续应该读了一个多月了，但是个人感觉还是读的不够深入，就拿cache这一章来说，本来是打算找个源代码来看下具体的cache是怎么工作的，以及各种的替换策略的源代码。找到memcached代码后看了下里面的cache.h文件，里面也就是一些memory申请和释放的动作，并没有设计到替换策略。

 希望看完这本书后深入的学习一下memcached的源代码，里面的slabs，memory management都是很好的学习材料。


-END
